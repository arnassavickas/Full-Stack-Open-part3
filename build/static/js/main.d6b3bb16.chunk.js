(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{42:function(e,t,n){"use strict";n.r(t);var o=n(0),c=n(1),r=n(17),a=n.n(r),u=n(18),i=n(19),l=n(8),s=n(3),d=function(e){var t=e.setRegex;return Object(o.jsxs)("div",{children:["filter shown with ",Object(o.jsx)("input",{onChange:function(e){t(new RegExp(e.target.value,"i"))}})]})},b=function(e){var t=e.handleSubmit,n=e.handleChangeName,c=e.handleChangeNumber,r=e.newName,a=e.newNumber;return Object(o.jsxs)("form",{onSubmit:t,children:[Object(o.jsxs)("div",{children:["name: ",Object(o.jsx)("input",{onChange:n,value:r})]}),Object(o.jsxs)("div",{children:["number: ",Object(o.jsx)("input",{onChange:c,value:a})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},j=function(e){var t=e.person,n=e.deletePerson;return Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:t.name}),Object(o.jsx)("td",{children:t.number}),Object(o.jsx)("td",{children:Object(o.jsx)("button",{onClick:function(){return n(t.name,t.id)},children:"delete"})})]},t.name)},h=function(e){var t=e.persons,n=e.regex,c=e.deletePerson,r=t.filter((function(e){return n.test(e.name)}));return Object(o.jsx)("table",{children:Object(o.jsx)("tbody",{children:r.map((function(e){return Object(o.jsx)(j,{person:e,deletePerson:c},e.name)}))})})},f=n(5),m=n.n(f),x="/api/persons",O={getAll:function(){return m.a.get(x).then((function(e){return e.data}))},create:function(e){return m.a.post(x,e).then((function(e){return e.data}))},deletePerson:function(e){return m.a.delete("".concat(x,"/").concat(e))},updatePerson:function(e){return m.a.put("".concat(x,"/").concat(e.id),e).then((function(e){return e.data}))}},p=function(e){var t=e.notification;return null===t.text?null:Object(o.jsx)("div",{style:{backgroundColor:"#DDDDDD",border:"1px solid ".concat(t.color),padding:10,marginBottom:"1rem",borderRadius:10,fontSize:20,fontFamily:"monospace",color:t.color},children:t.text})},g=function(){var e=Object(c.useState)([{name:"loading",number:"data"}]),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),u=Object(s.a)(a,2),j=u[0],f=u[1],m=Object(c.useState)(""),x=Object(s.a)(m,2),g=x[0],v=x[1],w=Object(c.useState)(new RegExp("","i")),C=Object(s.a)(w,2),N=C[0],P=C[1],S=Object(c.useState)({text:null,color:null}),k=Object(s.a)(S,2),y=k[0],D=k[1];Object(c.useEffect)((function(){O.getAll().then((function(e){r(e)}))}),[]);return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Phonebook"}),Object(o.jsx)(p,{notification:y}),Object(o.jsx)(d,{setRegex:P}),Object(o.jsx)("h2",{children:"add a new"}),Object(o.jsx)(b,{handleSubmit:function(e){e.preventDefault();var t=n.find((function(e){return e.name.toLowerCase()===j.toLowerCase()}));if(console.log(t),void 0!==t){if(window.confirm("".concat(j," is already added to phonebook replace the old number wit a new one?"))){var o=Object(l.a)(Object(l.a)({},t),{},{number:g});O.updatePerson(o).then((function(e){r(n.map((function(n){return n===t?e:n})))}))}}else{var c={name:j,number:g};O.create(c).then((function(e){D({text:"".concat(e.name," was added"),color:"green"}),r([].concat(Object(i.a)(n),[e])),f(""),v("")})),setTimeout((function(){D({text:null,color:null})}),4e3)}},handleChangeName:function(e){f(e.target.value)},handleChangeNumber:function(e){v(e.target.value)},newName:j,newNumber:g}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(h,{persons:n,regex:N,deletePerson:function(e,t){window.confirm("Delete ".concat(e,"?"))&&(O.deletePerson(t).then((function(t){D({text:"".concat(e," was successfully removed from the server"),color:"green"})})).catch((function(t){D({text:"Information of ".concat(e," has already been removed from the server"),color:"red"})})),setTimeout((function(){D({text:null,color:null})}),4e3),r(n.filter((function(e){return e.id!==t}))),console.log("here"))}})]})};t.default=Object(u.hot)(g);a.a.render(Object(o.jsx)(g,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.d6b3bb16.chunk.js.map