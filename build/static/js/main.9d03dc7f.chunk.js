(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{42:function(e,n,t){"use strict";t.r(n);var o=t(0),r=t(1),c=t(17),a=t.n(c),u=t(18),i=t(19),s=t(8),l=t(3),d=function(e){var n=e.setRegex;return Object(o.jsxs)("div",{children:["filter shown with ",Object(o.jsx)("input",{onChange:function(e){n(new RegExp(e.target.value,"i"))}})]})},b=function(e){var n=e.handleSubmit,t=e.handleChangeName,r=e.handleChangeNumber,c=e.newName,a=e.newNumber;return Object(o.jsxs)("form",{onSubmit:n,children:[Object(o.jsxs)("div",{children:["name: ",Object(o.jsx)("input",{onChange:t,value:c})]}),Object(o.jsxs)("div",{children:["number: ",Object(o.jsx)("input",{onChange:r,value:a})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},j=function(e){var n=e.person,t=e.deletePerson;return Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:n.name}),Object(o.jsx)("td",{children:n.number}),Object(o.jsx)("td",{children:Object(o.jsx)("button",{onClick:function(){return t(n.name,n.id)},children:"delete"})})]},n.name)},f=function(e){var n=e.persons,t=e.regex,r=e.deletePerson,c=n.filter((function(e){return t.test(e.name)}));return Object(o.jsx)("table",{children:Object(o.jsx)("tbody",{children:c.map((function(e){return Object(o.jsx)(j,{person:e,deletePerson:r},e.name)}))})})},h=t(5),m=t.n(h),O="/api/persons",x={getAll:function(){return m.a.get(O).then((function(e){return e.data}))},create:function(e){return m.a.post(O,e).then((function(e){return e.data}))},deletePerson:function(e){return m.a.delete("".concat(O,"/").concat(e))},updatePerson:function(e){return m.a.put("".concat(O,"/").concat(e.id),e).then((function(e){return e.data}))}},p=function(e){var n=e.notification;return null===n.text?null:Object(o.jsx)("div",{style:{backgroundColor:"#DDDDDD",border:"1px solid ".concat(n.color),padding:10,marginBottom:"1rem",borderRadius:10,fontSize:20,fontFamily:"monospace",color:n.color},children:n.text})},g=function(){var e=Object(r.useState)([{name:"loading",number:"data"}]),n=Object(l.a)(e,2),t=n[0],c=n[1],a=Object(r.useState)(""),u=Object(l.a)(a,2),j=u[0],h=u[1],m=Object(r.useState)(""),O=Object(l.a)(m,2),g=O[0],v=O[1],w=Object(r.useState)(new RegExp("","i")),C=Object(l.a)(w,2),N=C[0],P=C[1],S=Object(r.useState)({text:null,color:null}),k=Object(l.a)(S,2),y=k[0],D=k[1];Object(r.useEffect)((function(){x.getAll().then((function(e){c(e)}))}),[]);var R=function(e,n){D({text:e,color:n})},E=function(e){setTimeout((function(){D({text:null,color:null})}),e)};return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Phonebook"}),Object(o.jsx)(p,{notification:y}),Object(o.jsx)(d,{setRegex:P}),Object(o.jsx)("h2",{children:"add a new"}),Object(o.jsx)(b,{handleSubmit:function(e){e.preventDefault();var n=t.find((function(e){return e.name.toLowerCase()===j.toLowerCase()}));if(console.log(n),void 0!==n){if(window.confirm("".concat(j," is already added to phonebook replace the old number wit a new one?"))){var o=Object(s.a)(Object(s.a)({},n),{},{number:g});x.updatePerson(o).then((function(e){c(t.map((function(t){return t===n?e:t})))})).catch((function(e){console.log(e.response.data.error),R("".concat(e.response.data.error),"red"),E(4e3)}))}}else{var r={name:j,number:g};x.create(r).then((function(e){R("".concat(e.name," was added"),"green"),c([].concat(Object(i.a)(t),[e])),h(""),v("")})).catch((function(e){console.log(e.response.data),R("".concat(e.response.data.error),"red"),E(4e3)})),E(4e3)}},handleChangeName:function(e){h(e.target.value)},handleChangeNumber:function(e){v(e.target.value)},newName:j,newNumber:g}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(f,{persons:t,regex:N,deletePerson:function(e,n){window.confirm("Delete ".concat(e,"?"))&&(x.deletePerson(n).then((function(n){R("".concat(e," was successfully removed from the server"),"green")})).catch((function(n){R("Information of ".concat(e," has already been removed from the server"),"red")})),setTimeout((function(){D({text:null,color:null})}),4e3),c(t.filter((function(e){return e.id!==n}))),console.log("here"))}})]})};n.default=Object(u.hot)(g);a.a.render(Object(o.jsx)(g,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.9d03dc7f.chunk.js.map